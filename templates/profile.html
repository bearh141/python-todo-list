{% extends "base.html" %}

{% block title %}Profile - To-Do List{% endblock %}

{% block content %}
<div class="container mx-auto p-4">
    <h1 class="text-3xl font-bold mb-4">Profile</h1>

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="alert alert-{{ 'success' if category == 'success' else 'danger' }} mb-4">
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}
    {% endwith %}

    <div class="bg-white shadow-md rounded-lg p-6 mb-6">
        <div class="flex items-center mb-4">
            {% if user.avatar_url %}
                <img src="{{ user.avatar_url }}" alt="Avatar" class="w-16 h-16 rounded-full mr-4">
            {% else %}
                <div class="w-16 h-16 rounded-full bg-gray-200 flex items-center justify-center mr-4">
                    <span class="text-gray-600">{{ user.username[0] | upper }}</span>
                </div>
            {% endif %}
            <div>
                <h2 class="text-xl font-semibold">{{ user.username }}</h2>
                <p class="text-gray-600">{{ 'Admin' if user.is_admin else 'User' }}</p>
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
                <h3 class="text-lg font-semibold mb-2">Personal Information</h3>
                <p><strong>User ID:</strong> #{{ user.id }}</p>
                <p><strong>Email:</strong> {{ user.email or 'Not set' }}</p>
                <p><strong>Joined:</strong> {{ user.created_at.strftime('%Y-%m-%d') }}</p>
            </div>
            <div>
                <h3 class="text-lg font-semibold mb-2">Statistics</h3>
                <p><strong>Projects:</strong> {{ project_count }}</p>
                <p><strong>Tasks:</strong> {{ task_count }}</p>
                <p><strong>Completed Tasks:</strong> {{ completed_tasks }}</p>
            </div>
        </div>
    </div>

    <div class="flex space-x-4">
        <a href="{{ url_for('profile.edit_profile') }}" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">Edit Profile</a>
        <a href="{{ url_for('project.dashboard') }}" class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600">Dashboard</a>
        <a href="{{ url_for('auth.logout') }}" class="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600">Log Out</a>
    </div>
</div>
{% endblock %}